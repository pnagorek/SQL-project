IF OBJECT_ID('PACZKA') IS NOT NULL
	DROP TABLE PACZKA;
Go
IF OBJECT_ID('NADAWCA') IS NOT NULL
	DROP TABLE NADAWCA;
Go
IF OBJECT_ID('ODBIORCA') IS NOT NULL
	DROP TABLE ODBIORCA;
Go
IF OBJECT_ID('KLIENT') IS NOT NULL
	DROP TABLE KLIENT;
Go
IF OBJECT_ID('KURIER') IS NOT NULL
	DROP TABLE KURIER;
Go
IF OBJECT_ID('DZIELNICA') IS NOT NULL
	DROP TABLE DZIELNICA;
Go
IF OBJECT_ID('REJON') IS NOT NULL
	DROP TABLE REJON;
Go
IF OBJECT_ID('MIASTO') IS NOT NULL
	DROP TABLE MIASTO;
Go
IF OBJECT_ID('DYSPOZYTOR') IS NOT NULL
	DROP TABLE DYSPOZYTOR;
Go
IF OBJECT_ID('PUNKTSTACJONARNY') IS NOT NULL
	DROP TABLE PUNKTSTACJONARNY;
Go
IF OBJECT_ID('SAMOCHOD') IS NOT NULL
	DROP TABLE SAMOCHOD;
Go
IF OBJECT_ID('PRACOWNIK') IS NOT NULL
	DROP TABLE PRACOWNIK;
Go

CREATE TABLE PRACOWNIK (
    IDPRACOWNIK INT IDENTITY NOT NULL,
    IMIE VARCHAR(32) NOT NULL,
    NAZWISKO VARCHAR(64) NOT NULL,
	WYNAGRODZENIE INT NOT NULL,
    DATAZATRUDNIENIA DATE,    
)

GO

ALTER TABLE PRACOWNIK ADD CONSTRAINT PRACOWNIK_PK PRIMARY KEY  (IDPRACOWNIK)

GO

CREATE TABLE DYSPOZYTOR (
    IDDYSPOZYTOR INT NOT NULL,
    IDPUNKT INT,
);

GO

ALTER TABLE DYSPOZYTOR ADD CONSTRAINT DYSPOZYTOR_PK PRIMARY KEY  (IDDYSPOZYTOR)

GO
CREATE TABLE KURIER (
    IDKURIER INT NOT NULL,
    IDSAMOCHOD CHAR(10),
    NRTELEFONU INT,
    IDDYSPOZYTOR INT,
    IDREJON INT,
);

GO

ALTER TABLE KURIER ADD CONSTRAINT KURIER_PK PRIMARY KEY (IDKURIER)

GO

CREATE TABLE SAMOCHOD (
    NRREJESTRACYJNY CHAR(10) NOT NULL,
    MARKA VARCHAR(32),
    ROKPRODUKCJI INT,
    PRZEBIEG INT,
    RODZAJPALIWA VARCHAR(32),
);

GO

ALTER TABLE SAMOCHOD ADD CONSTRAINT SAMOCHOD_PK PRIMARY KEY (NRREJESTRACYJNY)

GO

CREATE TABLE MIASTO (
    IDMIASTO INT IDENTITY NOT NULL,
    NAZWA VARCHAR(32) NOT NULL,
);

GO

ALTER TABLE MIASTO ADD CONSTRAINT MIASTO_PK PRIMARY KEY (IDMIASTO)

GO

CREATE TABLE REJON (
    IDREJON INT IDENTITY NOT NULL,
    IDMIASTO INT NOT NULL,
    
);

GO

ALTER TABLE REJON ADD CONSTRAINT REJON_PK PRIMARY KEY (IDREJON)

GO

CREATE TABLE DZIELNICA (
    IDDZIELNICA INT IDENTITY NOT NULL,
    NAZWA VARCHAR(32) NOT NULL,
    IDREJON INT NOT NULL,
    IDMIASTO INT NOT NULL,   
);

GO

ALTER TABLE DZIELNICA ADD CONSTRAINT DZIELNICA_PK PRIMARY KEY (IDDZIELNICA)

GO

CREATE TABLE PUNKTSTACJONARNY (
    IDPUNKT INT IDENTITY NOT NULL,
    IDDZIELNICA INT NOT NULL,
);

GO

ALTER TABLE PUNKTSTACJONARNY ADD CONSTRAINT PUNKT_PK PRIMARY KEY (IDPUNKT)

GO

CREATE TABLE PACZKA (
    IDPACZKA INT IDENTITY NOT NULL,
    IDKURIER INT,
    IDNADAWCA INT NOT NULL,
    IDODBIORCA INT NOT NULL,
    IDPUNKT INT,
    WARTOSC INT,
    WAGA INT,
    DATANADANIA DATE,
);

GO

ALTER TABLE PACZKA ADD CONSTRAINT PACZKA_PK PRIMARY KEY (IDPACZKA)

GO

CREATE TABLE KLIENT (
    IDKLIENT INT IDENTITY NOT NULL,
    IMIE VARCHAR(32) NOT NULL,
    NAZWISKO VARCHAR(64) NOT NULL,
    NRTELEFONU CHAR(9) NOT NULL,
);

GO

ALTER TABLE KLIENT ADD CONSTRAINT KLIENT_PK PRIMARY KEY (IDKLIENT)

GO

CREATE TABLE NADAWCA (
    IDNADAWCA INT NOT NULL,
    RABAT DECIMAL(2, 1),
    ILOSCPACZEK INT,   
);

GO

ALTER TABLE NADAWCA ADD CONSTRAINT NADAWCA_PK PRIMARY KEY (IDNADAWCA)

GO

CREATE TABLE ODBIORCA (
    IDODBIORCA INT NOT NULL,
    IDMIASTO INT,
    ADRES VARCHAR(64),
);

GO

ALTER TABLE ODBIORCA ADD CONSTRAINT ODBIORCA_PK PRIMARY KEY (IDODBIORCA)

GO

ALTER TABLE NADAWCA ADD CONSTRAINT NADAWCA_KLIENT_FK1 FOREIGN KEY(IDNADAWCA) REFERENCES KLIENT(IDKLIENT) on update no action on delete no action 

GO

ALTER TABLE ODBIORCA ADD CONSTRAINT ODBIORCA_KLIENT_FK1 FOREIGN KEY(IDODBIORCA) REFERENCES KLIENT(IDKLIENT) on update no action on delete no action 

GO

ALTER TABLE ODBIORCA ADD CONSTRAINT ODBIORCA_MIASTO_FK1 FOREIGN KEY(IDMIASTO) REFERENCES MIASTO(IDMIASTO) on update no action on delete no action 

GO

ALTER TABLE PACZKA ADD CONSTRAINT PACZKA_KURIER_FK1 FOREIGN KEY(IDKURIER) REFERENCES KURIER(IDKURIER) on update no action on delete no action 

GO

ALTER TABLE PACZKA ADD CONSTRAINT PACZKA_NADAWCA_FK1 FOREIGN KEY(IDNADAWCA) REFERENCES KLIENT(IDKLIENT) on update no action on delete no action 

GO

ALTER TABLE PACZKA ADD CONSTRAINT PACZKA_ODBIORCA_FK1 FOREIGN KEY(IDODBIORCA) REFERENCES KLIENT(IDKLIENT) on update no action on delete no action 

GO

ALTER TABLE PACZKA ADD CONSTRAINT PACZKA_PUNKT_FK1 FOREIGN KEY(IDPUNKT) REFERENCES PUNKTSTACJONARNY(IDPUNKT) on update no action on delete no action 

GO

ALTER TABLE DYSPOZYTOR ADD CONSTRAINT PRACOWNIK_DYSPOZYTOR_FK1 FOREIGN KEY(IDDYSPOZYTOR) REFERENCES PRACOWNIK(IDPRACOWNIK) on update no action on delete no action 

GO

ALTER TABLE DYSPOZYTOR ADD CONSTRAINT PUNKT_DYSPOZYTOR_FK1 FOREIGN KEY(IDPUNKT) REFERENCES PUNKTSTACJONARNY(IDPUNKT) on update no action on delete no action 

GO

ALTER TABLE KURIER ADD CONSTRAINT PRACOWNIK_KURIER_FK1 FOREIGN KEY(IDKURIER) REFERENCES PRACOWNIK(IDPRACOWNIK) on update no action on delete no action 

GO

ALTER TABLE KURIER ADD CONSTRAINT DYSPOZYTOR_KURIER_FK1 FOREIGN KEY(IDDYSPOZYTOR) REFERENCES DYSPOZYTOR(IDDYSPOZYTOR) on update no action on delete no action 

GO

ALTER TABLE KURIER ADD CONSTRAINT SAMOCHOD_KURIER_FK1 FOREIGN KEY(IDSAMOCHOD) REFERENCES SAMOCHOD(NRREJESTRACYJNY) on update no action on delete no action 

GO

ALTER TABLE KURIER ADD CONSTRAINT REJON_KURIER_FK1 FOREIGN KEY(IDREJON) REFERENCES REJON(IDREJON) on update no action on delete no action 

GO

ALTER TABLE DZIELNICA ADD CONSTRAINT DZIELNICA_REJON_FK1 FOREIGN KEY(IDREJON) REFERENCES REJON(IDREJON) on update no action on delete no action 

GO

ALTER TABLE DZIELNICA ADD CONSTRAINT DZIELNICA_MIASTO_FK1 FOREIGN KEY(IDMIASTO) REFERENCES MIASTO(IDMIASTO) on update no action on delete no action 

GO

ALTER TABLE REJON ADD CONSTRAINT REJON_MIASTO_FK1 FOREIGN KEY(IDMIASTO) REFERENCES MIASTO(IDMIASTO) on update no action on delete no action 

GO

INSERT INTO PRACOWNIK (IMIE, NAZWISKO, DATAZATRUDNIENIA, WYNAGRODZENIE) 
VALUES ('ZENON', 'XENON', '2010-12-01', 1500),
	('HARRY', 'POTTER', '2011-03-02', 1600),
	('RON', 'WEASLEY', '2012-02-03', 1700),
	('PETER', 'PETTIGREW', '2013-11-04', 2000),
	('HAGRID', 'HAGRID', '2014-10-01', 6700),
	('LORD', 'VOLDEMORT', '2014-02-02', 1200),
	('HORACY', 'SLUGHORN', '2014-04-27', 5000),
	('SEVERUS', 'SNAPE', '2012-05-11', 1400),
	('DOLORES', 'XUMBRIDGE', '2013-04-01', 2500),
	('SYRIUS', 'BLACK', '2015-02-13', 1260),
	('SYRIUS', 'WHITE', '2015-07-25', 2600),
	('SYRIUS', 'GREEN', '2015-11-11', 4500),
	('DRACO', 'MALFOY', '2016-01-19', 1100),
	('DUDLEY', 'DURSLEY', '2011-05-01', 1500),
	('PETUNIA', 'DURSLEY', '2009-08-08', 1500),
	('MUNGUS', 'FLETCHER', '2009-01-01', 1600),
	('ALBUS', 'DUMBLEDORE', '2011-10-22', 1700),
	('NEARLY HEADLESS', 'NICK', '2012-12-23', 2000),
	('BLOODY', 'BARON', '2017-01-31', 700),
	('FAT', 'LADY', '2016-11-15', 1550),
	('MISS', 'NORISS', '2010-03-14', 2000);

GO


INSERT INTO MIASTO (NAZWA) VALUES ('WARSZAWA'),
	('WROCLAW'),
	('KRAKOW'),
	('RADOM'),
	('OTWOCK');

GO

INSERT INTO REJON (IDMIASTO) VALUES (1),
	(1),
	(1),
	(1),
	(1),
	(2),
	(2),
	(2),
	(3),
	(4),
	(4),
	(5)

GO

INSERT INTO DZIELNICA (NAZWA, IDREJON, IDMIASTO) VALUES ('OCHOTA', 1, 1),
	('MOKOTOW', 1, 1),
	('BEMOWO', 1, 1),
	('SRODMIESCIE', 2, 1),
	('URSYNOW', 2, 1),
	('BIELANY', 3, 1),
	('PRAGA', 3, 1),
	('TARGOWEK', 4, 1),
	('WOLA', 5, 1),
	('KRZYKI', 6, 2),
	('KOZANOW', 6, 2),
	('CENTRUM', 7, 2),
	('ZAPOROZE', 7, 2),
	('WLOCHY', 8, 2),
	('WAWEL', 9, 3),
	('LAZIENKI', 9, 3),
	('RESZTAKRAKOWA', 9, 3),
	('PORTLOTNICZY', 10, 4),
	('DROGAWYJAZDOWA', 11, 4),
	('OTWOCK MALY', 12, 5),
	('OTWOCK WIEKSZY', 12, 5)

GO

INSERT INTO PUNKTSTACJONARNY (IDDZIELNICA) VALUES (1), 
	(1), 
	(3), 
	(4), 
	(5), 
	(6)

GO

INSERT DYSPOZYTOR (IDDYSPOZYTOR, IDPUNKT) VALUES (1, 1),
	(3, 1),
	(5, 2),
	(7, 2),
	(9, 3),
	(11, 4),
	(13, 5),
	(15, 6)

GO

INSERT INTO SAMOCHOD(NRREJESTRACYJNY, MARKA, ROKPRODUKCJI, PRZEBIEG, RODZAJPALIWA) VALUES ('WWW 0001', 'FIAT' , YEAR('1990'), 353353, 'BENZYNA'),
('WWW 0002', 'FIAT' , YEAR('1991'), 111111, 'BENZYNA'),
('WWW 0003', 'POLONEZ' , YEAR('1992'), 323123, 'BENZYNA'),
('WWW 0004', 'POLONEZ' , YEAR('1993'), 23871, 'GAZ'),
('WWW 0005', 'SKODA' , YEAR('1994'), 743894, 'BENZYNA'),
('WWW 0006', 'SKODA' , YEAR('1991'), 12000, 'GAZ'),
('WWW 0007', 'SKODA' , YEAR('1993'), 999890, 'BENZYNA'),
('WWW 0008', 'TRABANT' , YEAR('2011'), 56789, 'DIESEL'),
('WWW 0009', 'SYRENKA' , YEAR('2017'), 100, 'PRAD'),
('WWW 0010', 'FIAT' , YEAR('1990'), 120120, 'DIESEL')

GO

INSERT KURIER(IDKURIER, IDSAMOCHOD, NRTELEFONU, IDDYSPOZYTOR, IDREJON) VALUES (2, 'WWW 0001', 999999999, 1, 1),
(4, 'WWW 0002', 999999998, 3, 2),
(6, 'WWW 0002', 999999997, 3, 2),
(8, 'WWW 0003', 999999996, 1, 1),
(12, 'WWW 0005', 999999994, 5, 3),
(14, 'WWW 0006', 999999993, 7, 4),
(16, 'WWW 0007', 999999992, 9, 5),
(18, 'WWW 0008', 999999990, 11, 6),
(19, 'WWW 0009', 999999989, 15, 7),
(20, 'WWW 0010', 999999988, 13, 8)

GO

INSERT KURIER(IDKURIER, NRTELEFONU, IDDYSPOZYTOR, IDREJON) VALUES 
(10, 999999995, 5, 3),
(17, 999999991, 9, 5),
(21, 999999987, 13, 8)

GO

INSERT INTO KLIENT (IMIE, NAZWISKO, NRTELEFONU) VALUES ('ZENON', 'XENON', 111111112),
('HARRY', 'POTTER', 111111113),
('RON', 'WEASLEY', 111111111),
('PETER', 'PETTIGREW', 111111114),
('HAGRID', 'HAGRID', 111111116),
('LORD', 'VOLDEMORT', 111111117),
('HORACY', 'SLUGHORN', 111111118),
('SEVERUS', 'SNAPE', 111111119),
('DOLORES', 'XUMBRIDGE', 111111110),
('SYRIUS', 'BLACK', 111111121),
('SYRIUS', 'WHITE', 111111122),
('SYRIUS', 'GREEN', 111111123),
('DRACO', 'MALFOY', 111111124),
('DUDLEY', 'DURSLEY', 111111125),
('PETUNIA', 'DURSLEY', 111111126),
('MUNGUS', 'FLETCHER', 111111127),
('ALBUS', 'DUMBLEDORE', 111111128),
('NEARLY HEADLESS', 'NICK', 111111129),
('BLOODY', 'BARON', 111111130),
('FAT', 'LADY', 111111131),
('MISS', 'NORISS', 111111132)

GO

INSERT INTO NADAWCA (IDNADAWCA, RABAT, ILOSCPACZEK) VALUES(1, 0.1, 1),
(3, 0.1, 1),
(5, 0.3, 3),
(7, 0.1, 1),
(9, 0.1, 1),
(11, 0.1, 1),
(13, 0.4, 4),
(15, 0.1, 1),
(17, 0.5, 5),
(19, 0.1, 1),
(21, 0.4, 4)

GO

INSERT INTO ODBIORCA (IDODBIORCA, IDMIASTO, ADRES) VALUES (2, 2, 'GRANICZNA 4/2'),
(4, 2, 'GRANICZNA 5/2'),
(6, 2, 'GRANICZNA 6/2'),
(8, 4, 'SLONECZNA 19A'),
(10, 5, 'MIMOZOWA 13'),
(12, 1, 'NALESNIKOWA 1'),
(14, 2, 'BALONOWA 4/2'),
(16, 3, 'NIEBIESKA 3'),
(18, 5, 'ZIELONA 2'),
(20, 5, 'BRZOZOWA 1'),
(1, 4, 'CZERWONA 11')

GO

INSERT INTO PACZKA (IDKURIER, IDNADAWCA, IDODBIORCA, WARTOSC, WAGA, DATANADANIA) VALUES (2, 1, 4, 750, 10, '2017-04-10'),
											(2, 3, 4, 200, 5, '2017-05-09')
GO

INSERT INTO PACZKA (IDKURIER, IDNADAWCA, IDODBIORCA) VALUES (4, 5, 2),
							(4, 5, 6),
							(4, 5, 6),
							(8, 9, 8)

GO


INSERT INTO PACZKA (IDKURIER, IDNADAWCA, IDODBIORCA, WARTOSC, WAGA) VALUES (10, 7, 10, 120, 5),
(12, 11, 10, 100, 5),
(12, 17, 12, 100, 2),
(12, 17, 12, 80, 3),
(14, 17, 12, 220, 1)

GO

INSERT INTO PACZKA (IDKURIER, IDNADAWCA, IDODBIORCA, WAGA) VALUES (14, 17, 12, 5),
(14, 17, 14, 10),
(16, 21, 14, 12),
(17, 21, 14, 1),
(17, 21, 16, 1),
(18, 21, 16, 1)

GO

INSERT INTO PACZKA (IDKURIER, IDNADAWCA, IDODBIORCA) VALUES (19, 19, 18),
(20, 15, 20),
(21, 13, 20),
(21, 13, 20),
(21, 13, 20),
(21, 13, 1)

GO